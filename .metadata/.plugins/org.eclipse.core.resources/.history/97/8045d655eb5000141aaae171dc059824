var latitude;
var longitude;
var reverseGeocoder;

var Geolocation = function(){
/*	
	Ti.Geolocation.purpose = "Your location is needed to determine current location."; 
	Ti.Geolocation.accuracy = Ti.Geolocation.ACCURACY_BEST;
	Ti.Geolocation.getCurrentPosition(function(e){
		latitude = e.coords.latitude;
		longitude = e.coords.longitude;
		var locLabel = Ti.UI.createLabel({
			color: '#fff',
			text: 'Latitude: ' + latitude + ', Longitude: ' + longitude,
			top: '10%',
			height: Ti.UI.SIZE,
			textAlign: 'center',
			font: {
				fontSize: '12',
				fontWeight: 'bold'
			}
		});
		mainView.add(locLabel);  
	}); 
}; 
exports.geolocation = geolocation;

 // try to get address
    var cityLocation = function(){
    	Titanium.Geolocation.reverseGeocoder(latitude,longitude, function(e) {
        var city;
       
        if (e.success) {
            var places = evt.places;
            if (places && places.length) {
                city = places[0].city;
            } else {
                address = "No address found";
            }
        }
        
    });
 };   
exports.cityLocation = cityLocation;
*/

var details = Ti.UI.createLabel({
  color: '#900',
  font: { fontSize:14 },
  text: 'Finding Details...',
  textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
  top: 30,
  width: Ti.UI.SIZE, height: Ti.UI.SIZE
});
win.add(details);
var addr = Ti.UI.createLabel({
  color: '#900',
  font: { fontSize:14 },
  text: 'Finding Address...',
  textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
  bottom: 30,
  width: Ti.UI.SIZE, height: Ti.UI.SIZE
});
win.add(addr);
 
var button = Titanium.UI.createButton({
   title: 'Find Me',
   width: 100,
   height: 50
});
win.add(button);
button.addEventListener('click',function(e){
   if (Ti.Geolocation.locationServicesEnabled) {
        Ti.Geolocation.purpose = 'Get Current Location';
        Ti.Geolocation.accuracy = Ti.Geolocation.ACCURACY_BEST;
        Ti.Geolocation.distanceFilter = 10;
        Ti.Geolocation.preferredProvider = Ti.Geolocation.PROVIDER_GPS;
        Ti.Geolocation.addEventListener('location', function(e) {
            if (e.error) {
                alert('Error: ' + e.error);
            } else {
                details.text = JSON.stringify(e);
                Ti.Geolocation.reverseGeocoder(e.coords.latitude, e.coords.longitude, function(e) {
                    Ti.API.info(e);
                    addr.text = JSON.stringify(e);
 
                });
            }
        });
    } else {
        alert('Please enable location services');
    }
});


};

exports.GeoLocation = geoLocation;