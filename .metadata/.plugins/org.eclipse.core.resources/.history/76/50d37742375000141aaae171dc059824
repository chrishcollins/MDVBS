Ti.UI.setBackgroundColor('#000');

var mainWin = Ti.UI.createWindow({});

var mainView = Ti.UI.createScrollView({
	backgroundImage: "images/bluecircle.jpg",
	showVerticalScrollIndicator: true
});

var needWeather = require('weather');


/*
// Create a Button.
var mediaButton = Ti.UI.createButton({
	title : 'Capture Media',
	height : '5%',
	width : '10%',
	top : '80%',
	left : '45%'
});

// Listen for click events.
mediaButton.addEventListener('click', function() {
	alert('\'mediaButton\' was clicked!');
});

// Add to the parent view.
//parentView.add(mediaButton);



mediaButton.addEventListener('click', function(e){
	Ti.Media.showCamera({
		saveToPhotoGallery: true,
		allowEditing: true,
		mediaTypes: [Ti.Media.MEDIA_TYPE_VIDEO,Ti.Media.MEDIA_TYPE_PHOTO],
		success: function(e) {
			if(e.mediaType === Ti.Media.MEDIA_TYPE_PHOTO) {
				var img = Ti.UI.createImageView({
					width: win.width,
					height: win.height,
					image: e.media
				});
				win.add(img);
			} else {
				alert("thought this was a photo but, it's:" + e.mediaType);
			}
		},
		error: function(error) {
			if (error.code === Ti.Media.NO_CAMERA) {
				alert("please run this on a device");
			} else {
				alert("other error: " + error.code);
			}
		}
	}); //closing showCamera
}); //closing mediaButton

*/


var mediaBtn = Ti.UI.createButton({
		title: "Capture media",
		bottom: "12dp"
	});

	var mediaView = Ti.UI.createView({
		top: "12dp",
		width: "300dp",
		height: "300dp",
		backgroundColor: "#FFCC00" //So that we can see the view area
	});

	var img;  //forward reference for the container for the image

	mainWin.add(mediaBtn);
	mainWin.add(mediaView);

	//An object to hold camera callbacks
	var gallery = {
		onSuccess: function(e){
			if(e.mediaType === Ti.Media.MEDIA_TYPE_PHOTO){ //Make sure it is a PHOTO that has been taken
				
				if(img){
					//Image view exists; let's remove it before we add again
					mediaView.remove(img);//
				}
				//e.media is a Blob representing the image
				//we can plug it into the image property of a new imageView
				img = Ti.UI.createImageView({
					image: e.media,
					zIndex: 0
				});

				//Add the photo taken to the mediaView view
				//The photo will scale down to the view
				mediaView.add(img);

				//If you wanted, you could get more information about the size of the picture
				//via the .size property of e.media

			} else if(e.mediaType === Ti.Media.MEDIA_TYPE_VIDEO){
				vid = Ti.Media.createVideoPlayer({
					media: e.media
				});
				
				//Add the video taken to the media view
				mediaView.add(vid);
			} else {
				alert("This is not a photo or video");
			}
		},
		onCancel: function(e){
			alert("Action cancelled");
		},
		onError: function(e){
			alert("An error occured with code: " + e.code);
		}
	};

	mediaBtn.addEventListener("click", function(e){
		Ti.Media.openPhotoGallery({
			success: gallery.onSuccess,
			cancel: gallery.onCancel,
			error: gallery.onError
		});
	});










mainWin.add(mainView);
//mainView.add(mediaButton);
mainWin.open();
