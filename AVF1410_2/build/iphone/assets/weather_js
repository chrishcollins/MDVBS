var Cloud=require("cloud"),geo=require("geoLocation");geo.geolocation();var myWeather="http://api.wunderground.com/api/c8aa6df478360a59/forecast/q/autoip.json",remoteResponse=function(e){if(Ti.Network.online){var t=JSON.parse(this.responseText);Cloud.loginAppUser(t);var i=t.forecast.simpleforecast.forecastday[0].high.fahrenheit,a=t.forecast.simpleforecast.forecastday[0].low.fahrenheit,o=t.forecast.simpleforecast.forecastday[0].avehumidity,r=t.forecast.simpleforecast.forecastday[0].conditions,n=t.forecast.txt_forecast.forecastday[0].title,d=t.forecast.txt_forecast.forecastday[0].fcttext,c=t.forecast.txt_forecast.forecastday[0].icon_url,f=t.forecast.txt_forecast.forecastday[2].fcttext,l=t.forecast.txt_forecast.forecastday[2].title,s=t.forecast.txt_forecast.forecastday[2].icon_url,m=t.forecast.txt_forecast.forecastday[4].fcttext,g=t.forecast.txt_forecast.forecastday[4].title,u=t.forecast.txt_forecast.forecastday[4].icon_url,h=t.forecast.txt_forecast.forecastday[6].fcttext,T=t.forecast.txt_forecast.forecastday[6].title,w=t.forecast.txt_forecast.forecastday[4].icon_url,p=t.forecast.simpleforecast.forecastday[0].date.monthname+" "+t.forecast.simpleforecast.forecastday[0].date.day,b=Ti.UI.createImageView({image:"images/Simply.png",width:"60%",height:"14%",top:"1%",left:"20%"}),I=Ti.UI.createLabel({text:n+", "+p,font:{fontSize:20,fontWeight:"bold"},color:"#fff",top:"16%",left:"5%",textAlign:"left"}),x=Ti.UI.createLabel({text:r,font:{fontSize:14,fontWeight:"thin"},color:"#fff",top:"18%",left:"5%",textAlign:"center"}),V=Ti.UI.createLabel({text:"hi "+i+" / lo "+a+"Â° F",color:"#fff",top:"20%",left:"5%",font:{fontSize:14,fontWeight:"thin"},textAlign:"center"}),y=Ti.UI.createLabel({text:"Avg Humidity "+o+"%",color:"#fff",top:"22%",left:"5%",font:{fontSize:14,fontWeight:"thin"},textAlign:"center"}),A=Ti.UI.createImageView({image:c,backgroundColor:"#fff",borderRadius:5,top:"16%",height:"7%",width:"10%",right:"15%",imageAlign:"center"}),U=Ti.UI.createLabel({text:d,font:{fontSize:20,fontWeight:"bold"},color:"#fff",top:"28%",textAlign:"center",width:"90%"}),v=Ti.UI.createView({backgroundColor:"#000000",opacity:"0.1",borderRadius:"10",top:"50%",left:"5%",height:"24%",width:"28%"}),S=Ti.UI.createLabel({text:f,font:{fontSize:11},color:"#fff",top:"54%",left:"5%",textAlign:"center",width:"27%"}),E=Ti.UI.createLabel({text:l,font:{fontSize:15,fontWeight:"bold"},color:"#fff",top:"50.5%",left:"8%",textAlign:"center",width:"20%"}),C=Ti.UI.createImageView({image:s,backgroundColor:"#fff",borderRadius:5,top:"75%",height:"5%",width:"7%",left:"15.5%",imageAlign:"center"}),L=Ti.UI.createView({backgroundColor:"#000000",opacity:"0.1",borderRadius:"10",top:"50%",left:"36%",height:"24%",width:"28%"}),_=Ti.UI.createLabel({text:m,font:{fontSize:11},color:"#fff",top:"54%",left:"36%",textAlign:"center",width:"27%"}),P=Ti.UI.createLabel({text:g,font:{fontSize:15,fontWeight:"bold"},color:"#fff",top:"50.5%",left:"40%",textAlign:"center",width:"20%"}),W=Ti.UI.createImageView({image:u,backgroundColor:"#fff",borderRadius:5,top:"75%",height:"5%",width:"7%",left:"47%",imageAlign:"center"}),z=Ti.UI.createView({backgroundColor:"#000000",opacity:"0.1",borderRadius:"10",top:"50%",right:"5%",height:"24%",width:"28%"}),R=Ti.UI.createLabel({text:h,font:{fontSize:11},color:"#fff",top:"54%",right:"5%",textAlign:"center",width:"27%"}),D=Ti.UI.createLabel({text:T,font:{fontSize:15,fontWeight:"bold"},color:"#fff",top:"50.5%",right:"8%",textAlign:"center",width:"20%"}),k=Ti.UI.createImageView({image:w,backgroundColor:"#fff",borderRadius:5,top:"75%",height:"5%",width:"7%",right:"15.5%",imageAlign:"center"});mainView.add(A),mainView.add(I),mainView.add(U),mainView.add(V),mainView.add(y),mainView.add(b),mainView.add(S),mainView.add(C),mainView.add(v),mainView.add(E),mainView.add(_),mainView.add(P),mainView.add(W),mainView.add(L),mainView.add(R),mainView.add(D),mainView.add(k),mainView.add(z),mainView.add(x)}else Ti.API.debug("Status: "+this.status),Ti.API.debug("Response: "+this.responseText),Ti.API.debug("Error: "+e.error),alert("There was an error retreiving data.  Please try again later.")},remoteError=function(e){Ti.API.debug("Status: "+this.status),Ti.API.debug("Response: "+this.responseText),Ti.API.debug("Error: "+e.error),alert("You must be connected to a network.")},xhr=Ti.Network.createHTTPClient({onload:remoteResponse,onerror:remoteError,timeout:5e4});xhr.open("GET",myWeather),xhr.send();